# Markdown Compiler for Laravel 4

### Installation

Run `composer require vtalbot/markdown:1.5`

Run `php artisan config:publish vtalbot/markdown`

Then edit `config.php` in `app/config/packages/vtalbot/markdown` to your needs.

Add `'VTalbot\Markdown\MarkdownServiceProvider',` to `providers` in `app/config/app.php`
and `'Markdown' => 'VTalbot\Markdown\Facades\Markdown',` to `aliases` in `app/config/app.php`

### Usage

    http://domain.name/test.md

If `test.md` doesn't exists in the `public` directory, it will search for `test.md` in `app/markdown` directory.
If found, compile it if needed and return the result.

```php
Markdown::make('file-in-markdown-directory');
```

Or, you can compile a simple string:

```php
Markdown::string('#test');
```

To handle markdown file not found:

```php
Markdown::setNotFoundHandler(function($file) { return 'Markdown file not found'; });
Markdown::setNotFoundHandler('MarkdownController@missing');
```

### Configuration

| Key                    | Default value            | Description                                                                                                           |
| ---------------------- | ------------------------ | --------------------------------------------------------------------------------------------------------------------- |
| `paths`                | `array('/markdown')`     | Directory where to find the markdown files.                                                                           |
| `routes`               | `array('',)`             | Routes prefixes.                                                                                                      |
| `extensions`           | `array('markdown','md')` | Extensions used to set routes.                                                                                        |
| `add_routes`           | `true`                   | Enable the creation of routes.                                                                                        |
| `empty_element_suffix` | `' />'`                  | Suffix for empty element (br, hr).                                                                                    |
| `tab_width`            | `4`                      | Tab character width.                                                                                                  |
| `no_markup`            | `false`                  | Prevent HTML tags to be passed to output.                                                                             |
| `no_entities`          | `false`                  | Convert entities like \&lt\; to \&amp\;.                                                                              |
| `predef_urls`          | `array()`                | Add reference for urls. `array('ref' => '//goo.gl')`: \[google\]\[ref\]                                               |
| `predef_titles`        | `array()`                | Same as `predef_urls`.                                                                                                |
| `use_extra`            | `true`                   | Use Markdown with extra, eg.: [fenced code block](http://michelf.ca/projects/php-markdown/extra/#fenced-code-blocks). |
| `fn_id_prefix`         | `''`                     | Prefix for ID attributes generated by [footnotes](http://michelf.ca/projects/php-markdown/extra/#footnotes).          |
| `fn_link_title`        | `''`                     | Title for [footnotes](http://michelf.ca/projects/php-markdown/extra/#footnotes) links.                                |
| `fn_backlink_title`    | `''`                     | Same as `fn_link_title`.                                                                                              |
| `fn_link_class`        | `'footnote-ref'`         | CSS class for [footnotes](http://michelf.ca/projects/php-markdown/extra/#fenced-code-blocks) links and backlinks.     |
| `fn_backlink_class`    | `'footnote-backref'`     | Same as `fn_link_class`.                                                                                              |
| `code_class_prefix`    | `''`                     | Prepend CSS class to [fenced code block](http://michelf.ca/projects/php-markdown/extra/#fenced-code-blocks).          |
| `code_attr_on_pre`     | `false`                  | Put attributes on `pre` instead of `code`.                                                                            |
| `predef_abbr`          | `array()`                | Create predefine [abbreviations](http://michelf.ca/projects/projects/php-markdown/extra/#abbr).                       |

For more information on the Markdown configuration, you may refer to http://michelf.ca/projects/php-markdown/configuration .

### Changelog

#### 1.5

- Change deprecated dependency.
- Add Markdown file not found handler.
- Add configurations based on the new dependency.
- Add some tests.
